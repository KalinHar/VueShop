(function(){"use strict";var t={4232:function(t,e,s){var o=s(9242),a=s(3396),r=s(7139);const i={id:"wrapper"},n={class:"navbar is-dark"},l={class:"navbar-brand"},c=(0,a._)("strong",null,"Shop",-1),u=(0,a._)("span",{"aria-hidden":"true"},null,-1),d=(0,a._)("span",{"aria-hidden":"true"},null,-1),m=(0,a._)("span",{"aria-hidden":"true"},null,-1),h=[u,d,m],p=(0,a._)("div",{class:"navbar-start"},[(0,a._)("div",{class:"navbar-item"},[(0,a._)("form",{method:"get",action:"/search"},[(0,a._)("div",{class:"field has-addons"},[(0,a._)("div",{class:"control"},[(0,a._)("input",{type:"text",class:"input",placeholder:"What are you looking for?",name:"query"})]),(0,a._)("div",{class:"control"},[(0,a._)("button",{class:"button is-primary"},[(0,a._)("span",{class:"icon"},[(0,a._)("i",{class:"fas fa-search"})])])])])])])],-1),g={class:"navbar-end"},_=(0,a.Uk)("Gadgets"),v={class:"navbar-item has-dropdown is-hoverable"},y=(0,a._)("a",{class:"navbar-link"},"Categories",-1),f={class:"navbar-dropdown"},w=(0,a.Uk)("Summer Sports"),b=(0,a.Uk)("Winter Sports"),k={class:"navbar-item"},S={class:"buttons"},T=(0,a.Uk)("My account"),C=(0,a.Uk)("Login"),q=(0,a._)("span",{class:"icon"},[(0,a._)("i",{class:"fas fa-shopping-cart"})],-1),$=(0,a._)("div",{class:"lds-dual-ring"},null,-1),L=[$],z={class:"section"},P=(0,a._)("footer",{class:"footer"},[(0,a._)("p",{class:"has-text-centered"},"Copyright (c) 2022")],-1);function I(t,e,s,o,u,d){const m=(0,a.up)("router-link"),$=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("nav",n,[(0,a._)("div",l,[(0,a.Wm)(m,{to:"/",class:"navbar-item"},{default:(0,a.w5)((()=>[c])),_:1}),(0,a._)("a",{class:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbar-menu",onClick:e[0]||(e[0]=t=>u.showMobileMenu=!u.showMobileMenu)},h)]),(0,a._)("div",{class:(0,r.C_)(["navbar-menu",{"is-active":u.showMobileMenu}]),id:"navbar-menu"},[p,(0,a._)("div",g,[(0,a.Wm)(m,{to:"/gadgets",class:"navbar-item"},{default:(0,a.w5)((()=>[_])),_:1}),(0,a._)("div",v,[y,(0,a._)("div",f,[(0,a.Wm)(m,{to:"/summer",class:"navbar-item"},{default:(0,a.w5)((()=>[w])),_:1}),(0,a.Wm)(m,{to:"/winter",class:"navbar-item"},{default:(0,a.w5)((()=>[b])),_:1})])]),(0,a._)("div",k,[(0,a._)("div",S,[t.$store.state.isAuthenticated?((0,a.wg)(),(0,a.j4)(m,{key:0,to:"/my-account",class:"button is-info is-light"},{default:(0,a.w5)((()=>[T])),_:1})):((0,a.wg)(),(0,a.j4)(m,{key:1,to:"/login",class:"button is-info is-light"},{default:(0,a.w5)((()=>[C])),_:1})),(0,a.Wm)(m,{to:"/cart",class:"button is-primary"},{default:(0,a.w5)((()=>[q,(0,a._)("span",null,"Cart ("+(0,r.zw)(d.cartTotalLength)+")",1)])),_:1})])])])],2)]),(0,a._)("div",{class:(0,r.C_)(["is-loading-bar has-text-centered",{"is-loading":t.$store.state.isLoading}])},L,2),(0,a._)("section",z,[(0,a.Wm)($)]),P])}var x=s(6265),O=s.n(x),D={data(){return{showMobileMenu:!1,cart:{items:{}}}},beforeCreate(){this.$store.commit("initializeStore");const t=this.$store.state.token;O().defaults.headers.common.Authorization=t?"Token "+t:""},mounted(){this.cart=this.$store.state.cart},computed:{cartTotalLength(){let t=0;for(let e=0;e<this.cart.items.length;e++)t+=this.cart.items[e].quantity;return t}}},U=s(89);const V=(0,U.Z)(D,[["render",I]]);var F=V,j=s(678),A=s(65),M=(0,A.MT)({state:{cart:{items:[]},isAuthenticated:!1,token:"",isLoading:!1},getters:{},mutations:{initializeStore(t){localStorage.getItem("cart")?t.cart=JSON.parse(localStorage.getItem("cart")):localStorage.setItem("cart",JSON.stringify(t.cart)),localStorage.getItem("token")?(t.token=localStorage.getItem("token"),t.isAuthenticated=!0):(t.token="",t.isAuthenticated=!1)},addToCart(t,e){const s=t.cart.items.filter((t=>t.product.id===e.product.id));s.length?s[0].quantity=parseInt(s[0].quantity)+parseInt(e.quantity):t.cart.items.push(e),localStorage.setItem("cart",JSON.stringify(t.cart))},setIsLoading(t,e){t.isLoading=e},setToken(t,e){t.token=e,t.isAuthenticated=!0},removeToken(t){t.token="",t.isAuthenticated=!1},clearCart(t){t.cart={items:[]},localStorage.setItem("cart",JSON.stringify(t.cart))}},actions:{},modules:{}});const H={class:"home"},N=(0,a._)("section",{class:"hero is-small is-dark mb-6"},[(0,a._)("div",{class:"hero-body has-text-centered"},[(0,a._)("p",{class:"title mb-6"}," Welcome to The Shop "),(0,a._)("p",{class:"subtitle"}," The best sport toys online ")])],-1),Y={class:"columns is-multiline"},Z=(0,a._)("div",{class:"column is-12"},[(0,a._)("h2",{class:"is-size-2 has-text-centered"},"Latest products")],-1);function W(t,e,s,o,r,i){const n=(0,a.up)("ProductBox");return(0,a.wg)(),(0,a.iD)("div",H,[N,(0,a._)("div",Y,[Z,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.latestProducts,(t=>((0,a.wg)(),(0,a.j4)(n,{key:t.id,product:t},null,8,["product"])))),128))])])}const K={class:"column is-3"},R={class:"box"},J={class:"image mb-4"},Q=["src"],B={class:"is-size-4"},E={class:"is-size-6 has-text-grey"},G={class:"buttons"},X=(0,a.Uk)("View details");function tt(t,e,s,o,i,n){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",K,[(0,a._)("div",R,[(0,a._)("figure",J,[(0,a._)("img",{src:s.product.get_thumbnail},null,8,Q)]),(0,a._)("h3",B,(0,r.zw)(s.product.name),1),(0,a._)("p",E,"$"+(0,r.zw)(s.product.price),1),(0,a._)("div",G,[(0,a.Wm)(l,{to:s.product.get_absolute_url,class:"button is-info is-light mt-4"},{default:(0,a.w5)((()=>[X])),_:1},8,["to"]),(0,a._)("button",{class:"button is-primary is-light mt-4",onClick:e[0]||(e[0]=t=>n.addToCart())},"Add to Cart")])])])}var et=s(5597),st={name:"ProductBox",props:{product:Object},methods:{addToCart(){(isNaN(this.quantity)||this.quantity<1)&&(this.quantity=1);const t={product:this.product,quantity:this.quantity};this.$store.commit("addToCart",t),(0,et.toast)({message:"The product was added to the cart",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"bottom-right"})}}};const ot=(0,U.Z)(st,[["render",tt],["__scopeId","data-v-250b1cfb"]]);var at=ot,rt={name:"HomeView",data(){return{latestProducts:[]}},components:{ProductBox:at},mounted(){this.getLatestProducts(),document.title="Shop | Home"},methods:{async getLatestProducts(){this.$store.commit("setIsLoading",!0),await O().get("/api/v1/latest-products/").then((t=>{this.latestProducts=t.data})).catch((t=>{console.log(t)})),this.$store.commit("setIsLoading",!1)}}};const it=(0,U.Z)(rt,[["render",W]]);var nt=it;const lt={class:"page-product"},ct={class:"columns is-multiline"},ut={class:"column is-9"},dt={class:"image mb-6"},mt=["src"],ht={class:"title"},pt={class:"column is-3"},gt=(0,a._)("h2",{class:"subtitle"},"Information",-1),_t=(0,a._)("strong",null,"Price: ",-1),vt={class:"field has-addons mt-6"},yt={class:"control"},ft={class:"control"};function wt(t,e,s,i,n,l){return(0,a.wg)(),(0,a.iD)("div",lt,[(0,a._)("div",ct,[(0,a._)("div",ut,[(0,a._)("figure",dt,[(0,a._)("img",{src:n.product.get_image},null,8,mt)]),(0,a._)("h1",ht,(0,r.zw)(n.product.name),1),(0,a._)("p",null,(0,r.zw)(n.product.description),1)]),(0,a._)("div",pt,[gt,(0,a._)("p",null,[_t,(0,a.Uk)("$"+(0,r.zw)(n.product.price),1)]),(0,a._)("div",vt,[(0,a._)("div",yt,[(0,a.wy)((0,a._)("input",{type:"number",class:"input",min:"1","onUpdate:modelValue":e[0]||(e[0]=t=>n.quantity=t)},null,512),[[o.nr,n.quantity]])]),(0,a._)("div",ft,[(0,a._)("a",{class:"button is-primary is-light",onClick:e[1]||(e[1]=t=>l.addToCart())},"Add to cart")])])])])])}var bt={name:"Product",data(){return{quantity:1,product:{}}},mounted(){this.getProduct()},methods:{async getProduct(){this.$store.commit("setIsLoading",!0);const t=this.$route.params.category_slug,e=this.$route.params.product_slug;await O().get(`/api/v1/products/${t}/${e}`).then((t=>{this.product=t.data,document.title="Shop | "+this.product.name})).catch((t=>{console.log(t)})),this.$store.commit("setIsLoading",!1)},addToCart(){(isNaN(this.quantity)||this.quantity<1)&&(this.quantity=1);const t={product:this.product,quantity:this.quantity};this.$store.commit("addToCart",t),(0,et.toast)({message:"The product was added to the cart",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"bottom-right"})}}};const kt=(0,U.Z)(bt,[["render",wt]]);var St=kt;const Tt={class:"page-category"},Ct={class:"columns is-multiline"},qt={class:"column is-12"},$t={class:"is-size-2 has-text-centered"};function Lt(t,e,s,o,i,n){const l=(0,a.up)("ProductBox");return(0,a.wg)(),(0,a.iD)("div",Tt,[(0,a._)("div",Ct,[(0,a._)("div",qt,[(0,a._)("h2",$t,(0,r.zw)(i.category.name),1)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.category.products,(t=>((0,a.wg)(),(0,a.j4)(l,{key:t.id,product:t},null,8,["product"])))),128))])])}var zt={name:"CategoryView",components:{ProductBox:at},data(){return{category:{products:[]}}},mounted(){this.getCategory()},watch:{$route(t,e){"category"===t.name&&this.getCategory()}},methods:{async getCategory(){const t=this.$route.params.category_slug;this.$store.commit("setIsLoading",!0),await O().get(`/api/v1/products/${t}/`).then((t=>{this.category=t.data,document.title="Shop | "+this.category.name})).catch((t=>{console.log(t),(0,et.toast)({message:"Something went wrong. Please try again.",type:"is-danger",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"bottom-right"})})),this.$store.commit("setIsLoading",!1)}}};const Pt=(0,U.Z)(zt,[["render",Lt]]);var It=Pt;const xt={class:"page-search"},Ot={class:"columns is-multiline"},Dt={class:"column is-12"},Ut=(0,a._)("h1",{class:"title"},"Search Results",-1),Vt={class:"is-size-5 has-text-grey"};function Ft(t,e,s,o,i,n){const l=(0,a.up)("ProductBox");return(0,a.wg)(),(0,a.iD)("div",xt,[(0,a._)("div",Ot,[(0,a._)("div",Dt,[Ut,(0,a._)("h2",Vt,'Search term: "'+(0,r.zw)(i.query)+'"',1)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.products,(t=>((0,a.wg)(),(0,a.j4)(l,{key:t.id,product:t},null,8,["product"])))),128))])])}var jt={name:"SearchView",components:{ProductBox:at},data(){return{products:[],query:""}},mounted(){document.title="Shop | Search";let t=window.location.search.substring(1),e=new URLSearchParams(t);e.get("query")&&(this.query=e.get("query"),this.performSearch())},methods:{async performSearch(){this.$store.commit("setIsLoading",!0),await O().post("/api/v1/products/search/",{query:this.query}).then((t=>{this.products=t.data})).catch((t=>{console.log(t)})),this.$store.commit("setIsLoading",!1)}}};const At=(0,U.Z)(jt,[["render",Ft]]);var Mt=At;const Ht={class:"page-cart"},Nt={class:"columns is-multiline"},Yt=(0,a._)("div",{class:"column is-12"},[(0,a._)("h1",{class:"title"},"Cart")],-1),Zt={key:0,class:"column is-12 box"},Wt={class:"table is-fullwidth"},Kt=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Product"),(0,a._)("th",null,"Price"),(0,a._)("th",null,"Quantity"),(0,a._)("th",null,"Total"),(0,a._)("th")])],-1),Rt={key:1,class:"column is-12 box"},Jt=(0,a._)("h2",{class:"subtitle"},"Summary",-1),Qt=(0,a._)("hr",null,null,-1),Bt={class:"buttons"},Et=(0,a.Uk)("Proceed to checkout"),Gt={key:2};function Xt(t,e,s,o,i,n){const l=(0,a.up)("CartItem"),c=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Ht,[(0,a._)("div",Nt,[Yt,n.cartTotalLength?((0,a.wg)(),(0,a.iD)("div",Zt,[(0,a._)("table",Wt,[Kt,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.cart.items,(t=>((0,a.wg)(),(0,a.j4)(l,{key:t.product.id,initialItem:t,onRemoveFromCart:n.removeFromCart},null,8,["initialItem","onRemoveFromCart"])))),128))])])])):(0,a.kq)("",!0),n.cartTotalLength?((0,a.wg)(),(0,a.iD)("div",Rt,[Jt,(0,a._)("strong",null,"$"+(0,r.zw)(n.cartTotalPrice.toFixed(2)),1),(0,a.Uk)(", "+(0,r.zw)(n.cartTotalLength)+" items ",1),Qt,(0,a._)("div",Bt,[(0,a.Wm)(c,{to:"/cart/checkout",class:"button is-dark"},{default:(0,a.w5)((()=>[Et])),_:1}),(0,a._)("button",{class:"button is-danger",onClick:e[0]||(e[0]=t=>n.emptyCart())},"Empty Cart")])])):(0,a.kq)("",!0),n.cartTotalLength?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("p",Gt,"You don't have any products in your cart..."))])])}const te=(0,a._)("i",{class:"fas fa-minus"},null,-1),ee=[te],se=(0,a._)("i",{class:"fas fa-plus"},null,-1),oe=[se];function ae(t,e,s,o,i,n){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("tr",null,[(0,a._)("td",null,[(0,a.Wm)(l,{to:i.item.product.get_absolute_url},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(i.item.product.name),1)])),_:1},8,["to"])]),(0,a._)("td",null,"$"+(0,r.zw)(i.item.product.price),1),(0,a._)("td",null,[(0,a.Uk)((0,r.zw)(i.item.quantity)+" ",1),(0,a._)("a",{class:"icon has-text-danger",onClick:e[0]||(e[0]=t=>n.decrementQuantity(i.item))},ee),(0,a._)("a",{class:"icon has-text-primary",onClick:e[1]||(e[1]=t=>n.incrementQuantity(i.item))},oe)]),(0,a._)("td",null,"$"+(0,r.zw)(n.getItemTotal(i.item).toFixed(2)),1),(0,a._)("td",null,[(0,a._)("button",{class:"delete",onClick:e[2]||(e[2]=t=>n.removeFromCart(i.item))})])])}var re={name:"CartItem",props:{initialItem:Object},data(){return{item:this.initialItem}},methods:{getItemTotal(t){return t.quantity*t.product.price},updateCart(){localStorage.setItem("cart",JSON.stringify(this.$store.state.cart))},decrementQuantity(t){t.quantity-=1,0===t.quantity&&this.$emit("removeFromCart",t),this.updateCart()},incrementQuantity(t){t.quantity+=1,this.updateCart()},removeFromCart(t){this.$emit("removeFromCart",t),this.updateCart()}}};const ie=(0,U.Z)(re,[["render",ae]]);var ne=ie,le={name:"Cart",components:{CartItem:ne},data(){return{cart:{items:[]}}},mounted(){this.cart=this.$store.state.cart,document.title="Shop | Cart"},methods:{removeFromCart(t){this.cart.items=this.cart.items.filter((e=>e.product.id!==t.product.id))},emptyCart(){this.cart.items=[],localStorage.setItem("cart",JSON.stringify(this.$store.state.cart))}},computed:{cartTotalLength(){return this.cart.items.reduce(((t,e)=>t+e.quantity),0)},cartTotalPrice(){return this.cart.items.reduce(((t,e)=>t+e.product.price*e.quantity),0)}}};const ce=(0,U.Z)(le,[["render",Xt]]);var ue=ce;const de={class:"page-sign-up"},me={class:"columns"},he={class:"column is-4 is-offset-4"},pe=(0,a._)("h1",{class:"title"},"Register",-1),ge={class:"field"},_e=(0,a._)("label",null,"Username",-1),ve={class:"control"},ye={class:"field"},fe=(0,a._)("label",null,"Password",-1),we={class:"control"},be={class:"field"},ke=(0,a._)("label",null,"Repeat password",-1),Se={class:"control"},Te={key:0,class:"notification is-danger"},Ce=(0,a._)("div",{class:"field"},[(0,a._)("div",{class:"control"},[(0,a._)("button",{class:"button is-dark"},"Register")])],-1),qe=(0,a._)("hr",null,null,-1),$e=(0,a.Uk)(" Or "),Le=(0,a.Uk)("click here"),ze=(0,a.Uk)(" to Login! ");function Pe(t,e,s,i,n,l){const c=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",de,[(0,a._)("div",me,[(0,a._)("div",he,[pe,(0,a._)("form",{onSubmit:e[3]||(e[3]=(0,o.iM)(((...t)=>l.submitForm&&l.submitForm(...t)),["prevent"]))},[(0,a._)("div",ge,[_e,(0,a._)("div",ve,[(0,a.wy)((0,a._)("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=t=>n.username=t)},null,512),[[o.nr,n.username]])])]),(0,a._)("div",ye,[fe,(0,a._)("div",we,[(0,a.wy)((0,a._)("input",{type:"password",class:"input","onUpdate:modelValue":e[1]||(e[1]=t=>n.password=t)},null,512),[[o.nr,n.password]])])]),(0,a._)("div",be,[ke,(0,a._)("div",Se,[(0,a.wy)((0,a._)("input",{type:"password",class:"input","onUpdate:modelValue":e[2]||(e[2]=t=>n.password2=t)},null,512),[[o.nr,n.password2]])])]),n.errors.length?((0,a.wg)(),(0,a.iD)("div",Te,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.errors,(t=>((0,a.wg)(),(0,a.iD)("p",{key:t},(0,r.zw)(t),1)))),128))])):(0,a.kq)("",!0),Ce,qe,$e,(0,a.Wm)(c,{to:"/login"},{default:(0,a.w5)((()=>[Le])),_:1}),ze],32)])])])}var Ie={name:"RegisterView",data(){return{username:"",password:"",password2:"",errors:[]}},mounted(){document.title="Shop | Register"},methods:{submitForm(){if(this.errors=[],""===this.username&&this.errors.push("The username is missing"),""===this.password&&this.errors.push("The password is too short"),this.password!==this.password2&&this.errors.push("The passwords doesn't match"),!this.errors.length){const t={username:this.username,password:this.password};O().post("/api/v1/users/",t).then((t=>{(0,et.toast)({message:"Account created, please Login!",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"bottom-right"}),this.$router.push("/login")})).catch((t=>{if(t.response){for(const e in t.response.data)this.errors.push(`${e}: ${t.response.data[e]}`);console.log(JSON.stringify(t.response.data))}else t.message&&(this.errors.push("Something went wrong. Please try again"),console.log(JSON.stringify(t)))}))}}}};const xe=(0,U.Z)(Ie,[["render",Pe]]);var Oe=xe;const De={class:"page-log-in"},Ue={class:"columns"},Ve={class:"column is-4 is-offset-4"},Fe=(0,a._)("h1",{class:"title"},"Login",-1),je={class:"field"},Ae=(0,a._)("label",null,"Username",-1),Me={class:"control"},He={class:"field"},Ne=(0,a._)("label",null,"Password",-1),Ye={class:"control"},Ze={key:0,class:"notification is-danger"},We=(0,a._)("div",{class:"field"},[(0,a._)("div",{class:"control"},[(0,a._)("button",{class:"button is-dark"},"Log in")])],-1),Ke=(0,a._)("hr",null,null,-1),Re=(0,a.Uk)(" Or "),Je=(0,a.Uk)("click here"),Qe=(0,a.Uk)(" to Register! ");function Be(t,e,s,i,n,l){const c=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",De,[(0,a._)("div",Ue,[(0,a._)("div",Ve,[Fe,(0,a._)("form",{onSubmit:e[2]||(e[2]=(0,o.iM)(((...t)=>l.submitForm&&l.submitForm(...t)),["prevent"]))},[(0,a._)("div",je,[Ae,(0,a._)("div",Me,[(0,a.wy)((0,a._)("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=t=>n.username=t)},null,512),[[o.nr,n.username]])])]),(0,a._)("div",He,[Ne,(0,a._)("div",Ye,[(0,a.wy)((0,a._)("input",{type:"password",class:"input","onUpdate:modelValue":e[1]||(e[1]=t=>n.password=t)},null,512),[[o.nr,n.password]])])]),n.errors.length?((0,a.wg)(),(0,a.iD)("div",Ze,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.errors,(t=>((0,a.wg)(),(0,a.iD)("p",{key:t},(0,r.zw)(t),1)))),128))])):(0,a.kq)("",!0),We,Ke,Re,(0,a.Wm)(c,{to:"/register"},{default:(0,a.w5)((()=>[Je])),_:1}),Qe],32)])])])}var Ee={name:"LoginView",data(){return{username:"",password:"",errors:[]}},mounted(){document.title="Shop | Login"},methods:{async submitForm(){O().defaults.headers.common.Authorization="",localStorage.removeItem("token");const t={username:this.username,password:this.password};await O().post("/api/v1/token/login/",t).then((t=>{const e=t.data.auth_token;this.$store.commit("setToken",e),O().defaults.headers.common.Authorization="Token "+e,localStorage.setItem("token",e);const s=this.$route.query.to||"/cart";this.$router.push(s)})).catch((t=>{if(t.response)for(const e in t.response.data)this.errors.push(`${e}: ${t.response.data[e]}`);else this.errors.push("Something went wrong. Please try again"),console.log(JSON.stringify(t))}))}}};const Ge=(0,U.Z)(Ee,[["render",Be]]);var Xe=Ge;const ts={class:"page-my-account"},es={class:"columns is-multiline"},ss=(0,a._)("div",{class:"column is-12"},[(0,a._)("h1",{class:"title"},"My account")],-1),os={class:"column is-12"},as=(0,a._)("hr",null,null,-1),rs={class:"column is-12"},is=(0,a._)("h2",{class:"subtitle"},"My orders",-1);function ns(t,e,s,o,r,i){const n=(0,a.up)("OrderSummary");return(0,a.wg)(),(0,a.iD)("div",ts,[(0,a._)("div",es,[ss,(0,a._)("div",os,[(0,a._)("button",{onClick:e[0]||(e[0]=t=>i.logout()),class:"button is-danger"},"Logout")]),as,(0,a._)("div",rs,[is,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.orders,(t=>((0,a.wg)(),(0,a.j4)(n,{key:t.id,order:t},null,8,["order"])))),128))])])])}const ls={class:"box mb-4"},cs={class:"is-size-4 mb-6"},us=(0,a._)("h4",{class:"is-size-5"},"Products",-1),ds={class:"table is-fullwidth"},ms=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Product"),(0,a._)("th",null,"Price"),(0,a._)("th",null,"Quantity"),(0,a._)("th",null,"Total")])],-1);function hs(t,e,s,o,i,n){return(0,a.wg)(),(0,a.iD)("div",ls,[(0,a._)("h3",cs,"Order #"+(0,r.zw)(s.order.id),1),us,(0,a._)("table",ds,[ms,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.order.items,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.product.id},[(0,a._)("td",null,(0,r.zw)(t.product.name),1),(0,a._)("td",null,"$"+(0,r.zw)(t.product.price),1),(0,a._)("td",null,(0,r.zw)(t.quantity),1),(0,a._)("td",null,"$"+(0,r.zw)(n.getItemTotal(t).toFixed(2)),1)])))),128))])])])}var ps={name:"OrderSummary",props:{order:Object},methods:{getItemTotal(t){return t.quantity*t.product.price},orderTotalLength(t){return t.items.reduce(((t,e)=>t+e.quantity),0)}}};const gs=(0,U.Z)(ps,[["render",hs]]);var _s=gs,vs={name:"MyAccount",components:{OrderSummary:_s},data(){return{orders:[]}},mounted(){document.title="Shop | My account",this.getMyOrders()},methods:{logout(){O().defaults.headers.common.Authorization="",localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("userid"),this.$store.commit("removeToken"),this.$router.push("/")},async getMyOrders(){this.$store.commit("setIsLoading",!0),await O().get("/api/v1/orders/").then((t=>{this.orders=t.data})).catch((t=>{console.log(t)})),this.$store.commit("setIsLoading",!1)}}};const ys=(0,U.Z)(vs,[["render",ns]]);var fs=ys;const ws={class:"page-checkout"},bs={class:"columns is-multiline"},ks=(0,a._)("div",{class:"column is-12"},[(0,a._)("h1",{class:"title"},"Checkout")],-1),Ss={class:"column is-12 box"},Ts={class:"table is-fullwidth"},Cs=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Product"),(0,a._)("th",null,"Price"),(0,a._)("th",null,"Quantity"),(0,a._)("th",null,"Total")])],-1),qs=(0,a._)("td",{colspan:"2"},"Total",-1),$s={class:"column is-12 box"},Ls=(0,a._)("h2",{class:"subtitle"},"Shipping details",-1),zs=(0,a._)("p",{class:"has-text-grey mb-4"},"* All fields are required",-1),Ps={class:"columns is-multiline"},Is={class:"column is-6"},xs={class:"field"},Os=(0,a._)("label",null,"First name*",-1),Ds={class:"control"},Us={class:"field"},Vs=(0,a._)("label",null,"Last name*",-1),Fs={class:"control"},js={class:"field"},As=(0,a._)("label",null,"E-mail*",-1),Ms={class:"control"},Hs={class:"field"},Ns=(0,a._)("label",null,"Phone*",-1),Ys={class:"control"},Zs={class:"column is-6"},Ws={class:"field"},Ks=(0,a._)("label",null,"Address*",-1),Rs={class:"control"},Js={class:"field"},Qs=(0,a._)("label",null,"Zip code*",-1),Bs={class:"control"},Es={class:"field"},Gs=(0,a._)("label",null,"Place*",-1),Xs={class:"control"},to={key:0,class:"notification is-danger mt-4"},eo=(0,a._)("hr",null,null,-1),so=(0,a._)("div",{id:"card-element",class:"mb-5"},null,-1),oo=(0,a._)("hr",null,null,-1);function ao(t,e,s,i,n,l){return(0,a.wg)(),(0,a.iD)("div",ws,[(0,a._)("div",bs,[ks,(0,a._)("div",Ss,[(0,a._)("table",Ts,[Cs,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.cart.items,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.product.id},[(0,a._)("td",null,(0,r.zw)(t.product.name),1),(0,a._)("td",null,"$"+(0,r.zw)(t.product.price),1),(0,a._)("td",null,(0,r.zw)(t.quantity),1),(0,a._)("td",null,"$"+(0,r.zw)(l.getItemTotal(t).toFixed(2)),1)])))),128))]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[qs,(0,a._)("td",null,(0,r.zw)(l.cartTotalLength),1),(0,a._)("td",null,"$"+(0,r.zw)(l.cartTotalPrice.toFixed(2)),1)])])])]),(0,a._)("div",$s,[Ls,zs,(0,a._)("div",Ps,[(0,a._)("div",Is,[(0,a._)("div",xs,[Os,(0,a._)("div",Ds,[(0,a.wy)((0,a._)("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=t=>n.first_name=t)},null,512),[[o.nr,n.first_name]])])]),(0,a._)("div",Us,[Vs,(0,a._)("div",Fs,[(0,a.wy)((0,a._)("input",{type:"text",class:"input","onUpdate:modelValue":e[1]||(e[1]=t=>n.last_name=t)},null,512),[[o.nr,n.last_name]])])]),(0,a._)("div",js,[As,(0,a._)("div",Ms,[(0,a.wy)((0,a._)("input",{type:"email",class:"input","onUpdate:modelValue":e[2]||(e[2]=t=>n.email=t)},null,512),[[o.nr,n.email]])])]),(0,a._)("div",Hs,[Ns,(0,a._)("div",Ys,[(0,a.wy)((0,a._)("input",{type:"text",class:"input","onUpdate:modelValue":e[3]||(e[3]=t=>n.phone=t)},null,512),[[o.nr,n.phone]])])])]),(0,a._)("div",Zs,[(0,a._)("div",Ws,[Ks,(0,a._)("div",Rs,[(0,a.wy)((0,a._)("input",{type:"text",class:"input","onUpdate:modelValue":e[4]||(e[4]=t=>n.address=t)},null,512),[[o.nr,n.address]])])]),(0,a._)("div",Js,[Qs,(0,a._)("div",Bs,[(0,a.wy)((0,a._)("input",{type:"text",class:"input","onUpdate:modelValue":e[5]||(e[5]=t=>n.zipcode=t)},null,512),[[o.nr,n.zipcode]])])]),(0,a._)("div",Es,[Gs,(0,a._)("div",Xs,[(0,a.wy)((0,a._)("input",{type:"text",class:"input","onUpdate:modelValue":e[6]||(e[6]=t=>n.place=t)},null,512),[[o.nr,n.place]])])])])]),n.errors.length?((0,a.wg)(),(0,a.iD)("div",to,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.errors,(t=>((0,a.wg)(),(0,a.iD)("p",{key:t},(0,r.zw)(t),1)))),128))])):(0,a.kq)("",!0),eo,so,l.cartTotalLength?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[oo,(0,a._)("button",{class:"button is-dark",onClick:e[7]||(e[7]=(...t)=>l.submitForm&&l.submitForm(...t))},"Pay with Stripe")],64)):(0,a.kq)("",!0)])])])}var ro={name:"CheckoutView",data(){return{cart:{items:[]},stripe:{},card:{},first_name:"",last_name:"",email:"",phone:"",address:"",zipcode:"",place:"",errors:[]}},mounted(){if(document.title="Shop | Checkout",this.cart=this.$store.state.cart,this.cartTotalLength>0){this.stripe=Stripe("pk_test_51L4MoKJ8Rx2yNgV7RcqJFLYVLQivKlolNgK6CTrQVVOQyOvTg4tkcmg9a8uakT5nGCAA9hGwBUhhDyokkVICYpO500Cj1damAx");const t=this.stripe.elements();this.card=t.create("card",{hidePostalCode:!0}),this.card.mount("#card-element")}},methods:{getItemTotal(t){return t.quantity*t.product.price},submitForm(){this.errors=[],""===this.first_name&&this.errors.push("The first name field is missing!"),""===this.last_name&&this.errors.push("The last name field is missing!"),""===this.email&&this.errors.push("The email field is missing!"),""===this.phone&&this.errors.push("The phone field is missing!"),""===this.address&&this.errors.push("The address field is missing!"),""===this.zipcode&&this.errors.push("The zip code field is missing!"),""===this.place&&this.errors.push("The place field is missing!"),this.errors.length||(this.$store.commit("setIsLoading",!0),this.stripe.createToken(this.card).then((t=>{t.error?(this.$store.commit("setIsLoading",!1),this.errors.push("Something went wrong with Stripe. Please try again"),console.log(t.error.message)):this.stripeTokenHandler(t.token)})))},async stripeTokenHandler(t){const e=[];for(let o=0;o<this.cart.items.length;o++){const t=this.cart.items[o],s={product:t.product.id,quantity:t.quantity,price:t.product.price*t.quantity};e.push(s)}const s={first_name:this.first_name,last_name:this.last_name,email:this.email,address:this.address,zipcode:this.zipcode,place:this.place,phone:this.phone,items:e,stripe_token:t.id};await O().post("/api/v1/checkout/",s).then((t=>{this.$store.commit("clearCart"),this.$router.push("/cart/success")})).catch((t=>{this.errors.push("Something went wrong. Please try again"),console.log(t)})),this.$store.commit("setIsLoading",!1)}},computed:{cartTotalPrice(){return this.cart.items.reduce(((t,e)=>t+e.product.price*e.quantity),0)},cartTotalLength(){return this.cart.items.reduce(((t,e)=>t+e.quantity),0)}}};const io=(0,U.Z)(ro,[["render",ao]]);var no=io;const lo={class:"page-success"},co=(0,a._)("div",{class:"columns is-multiline"},[(0,a._)("div",{class:"column is-12"},[(0,a._)("h1",{class:"title"},"Thank you"),(0,a._)("p",null,"Your order will be processed within 48 hours")])],-1),uo=[co];function mo(t,e,s,o,r,i){return(0,a.wg)(),(0,a.iD)("div",lo,uo)}var ho={name:"SuccessView",mounted(){document.title="Shop | Success"}};const po=(0,U.Z)(ho,[["render",mo]]);var go=po;const _o=[{path:"/",name:"home",component:nt},{path:"/about",name:"about",component:()=>s.e(443).then(s.bind(s,7381))},{path:"/search",name:"search",component:Mt},{path:"/:category_slug/:product_slug",name:"product",component:St},{path:"/:category_slug",name:"category",component:It},{path:"/cart",name:"cart",component:ue},{path:"/register",name:"register",component:Oe},{path:"/login",name:"login",component:Xe},{path:"/my-account",name:"my-account",component:fs,meta:{requireLogin:!0}},{path:"/cart/checkout",name:"checkout",component:no,meta:{requireLogin:!0}},{path:"/cart/success",name:"success",component:go}],vo=(0,j.p7)({history:(0,j.PO)("VueShop/"),routes:_o});vo.beforeEach(((t,e,s)=>{t.matched.some((t=>t.meta.requireLogin))&&!M.state.isAuthenticated?s({name:"login",query:{to:t.path}}):s()}));var yo=vo;O().defaults.baseURL="https://dj-shop-app.herokuapp.com",(0,o.ri)(F).use(M).use(yo,O()).mount("#app")}},e={};function s(o){var a=e[o];if(void 0!==a)return a.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,o,a,r){if(!o){var i=1/0;for(u=0;u<t.length;u++){o=t[u][0],a=t[u][1],r=t[u][2];for(var n=!0,l=0;l<o.length;l++)(!1&r||i>=r)&&Object.keys(s.O).every((function(t){return s.O[t](o[l])}))?o.splice(l--,1):(n=!1,r<i&&(i=r));if(n){t.splice(u--,1);var c=a();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[o,a,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,o){return s.f[o](t,e),e}),[]))}}(),function(){s.u=function(t){return"js/about.170f0511.js"}}(),function(){s.miniCssF=function(t){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="vueshop:";s.l=function(o,a,r,i){if(t[o])t[o].push(a);else{var n,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==e+r){n=d;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.setAttribute("data-webpack",e+r),n.src=o),t[o]=[a];var m=function(e,s){n.onerror=n.onload=null,clearTimeout(h);var a=t[o];if(delete t[o],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((function(t){return t(s)})),e)return e(s)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="VueShop/"}(),function(){var t={143:0};s.f.j=function(e,o){var a=s.o(t,e)?t[e]:void 0;if(0!==a)if(a)o.push(a[2]);else{var r=new Promise((function(s,o){a=t[e]=[s,o]}));o.push(a[2]=r);var i=s.p+s.u(e),n=new Error,l=function(o){if(s.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var r=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;n.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",n.name="ChunkLoadError",n.type=r,n.request=i,a[1](n)}};s.l(i,l,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,r,i=o[0],n=o[1],l=o[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(l)var u=l(s)}for(e&&e(o);c<i.length;c++)r=i[c],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(u)},o=self["webpackChunkvueshop"]=self["webpackChunkvueshop"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(4232)}));o=s.O(o)})();
//# sourceMappingURL=app.9cb12a38.js.map